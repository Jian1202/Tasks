# 计算机网络与浏览器基础

## 一、计算机基础

### 1、什么是计算机？

计算机是一种能够按照程序指令对数据进行处理（输入、存储、计算、控制、输出）的**电子设备**。它是现代信息社会的核心工具，广泛应用于科学计算、数据处理、信息管理、娱乐等各个领域。

### 2、基本组成

计算机由**软、硬件**两部分构成：

* **硬件**：计算机的物理组成部分，是看得见摸得着的实体。

  * **中央处理器 (CPU)**：计算机的“大脑”，负责执行指令和处理数据，是所有计算、逻辑判断和控制操作的核心。它决定了计算机的**运算速度**和**处理能力**。常见制造商有 Intel 和 AMD。

  * **内存 (RAM)**：用于临时存储程序和数据，供 CPU 快速访问。它的读写速度极快，但**断电后数据会丢失**。内存的大小直接影响计算机同时运行的程序数量和流畅度。

  * **硬盘 (HDD/SSD)**：用于长期存储数据和程序，即使断电数据也不会丢失。
    * **机械硬盘 (HDD)** 速度较慢但容量大，适合存储大量不常访问的数据。
    
    * **固态硬盘 (SSD)** 速度快、抗震性好、无噪音，适合作为操作系统盘和常用软件的安装盘，能显著提升系统启动和程序加载速度。
    
  * **输入设备**：用于向计算机输入信息和指令，是人机交互的桥梁，如键盘、鼠标、麦克风、扫描仪、摄像头等。
  * **输出设备**：用于显示或输出计算机处理后的结果信息，如显示器、打印机、扬声器、投影仪等。
    
  * **主板**：连接所有硬件组件的电路板，是计算机的**骨架**。所有其他硬件都通过主板相互连接和通信，其质量和兼容性直接影响计算机的稳定性和扩展性。
    
  * **显卡**：处理图形输出，将数字信号转换为显示器可识别的图像信号。有集成显卡（性能一般）和独立显卡（性能强劲）之分。独立显卡对于游戏、视频编辑和图形设计等需要大量图形处理能力的应用至关重要。
  
* **软件**：计算机中无形的指令集合，控制硬件执行特定任务。
  * **操作系统 (OS)**：管理计算机硬件与软件资源的程序，是计算机的**核心软件**。它负责调度任务、管理文件、控制硬件，并为应用程序提供运行环境。常见的有 Windows、macOS、Linux 等。
  * **应用程序**：为特定任务设计的程序，运行在操作系统之上，为用户提供各种功能，满足用户的特定需求，例如浏览器、文字处理器、游戏等。

## 二、互联网基础

### 1、互联网是怎么跑起来的？

#### 1、网络与互联网

- **网络**：网络是一组相互连接的计算机或其他设备。
- **互联网 (Internet)**：==互联网是一个**网络的网络**==，它是一个全球性的计算机网络，连接着世界各地的设备和系统。

#### 2、互联网的底层工作原理

从高层次上来说，互联网<u>使用一组**标准化协议**将设备和计算机系统连接在一起</u>。这些协议定义了设备之间的信息交换方式，并确保数据可靠、安全地传输。

#### 3、互联网的核心：路由器

互联网的核心是一个**全球网络**，这个网络由互相连接的**路由器**组成。这些路由器承担着在不同的设备（如电脑、手机等）和系统（如操作系统、软件系统等）之间**引导流量**的职责。

也就是说，当数据在互联网上传输时： **路由器决定数据的传输路径**，确保数据能够从一个设备准确地传输到另一个设备或者系统。

#### 4、互联网进行数据传输的过程

- 数据会被分解成**小数据包**（包）。
- 这些数据包从你的设备发送到路由器。
- 路由器检查数据包并将其转发到通往目标的路径中的下一个路由器。
- 此过程将一直持续，直到数据包到达其最终目的地。

#### 5、互联网的数据安全保障：核心协议

为了确保正确发送和接收数据包，互联网使用各种协议（核心协议），包括 **Internet 协议 (IP)** 和 **传输控制协议 (TCP)**：

- **IP (Internet Protocol)**：负责将数据包路由到正确的目的地。
- **TCP (Transmission Control Protocol)**：确保数据包以正确的顺序可靠传输。

#### 6、其他关键技术和协议

除此之外，还有许多其他技术和协议用于实现互联网上的通讯和数据交换：

- **域名系统 (DNS)**
- **超文本传输协议 (HTTP)**
- **安全套接字层/传输层安全性 (SSL/TLS) 协议**

#### 7、ISP (互联网服务提供商)

**ISP** 即互联网服务提供商，是向广大用户综合提供互联网接入业务、信息业务和增值业务的电信运营商。

> **举例**：中国电信、中国移动、中国联通等都是我们常见的 ISP。它们提供了我们接入互联网的“最后一公里”服务。

#### 8、互联网一些关键术语和概念

- **包**：通过 Internet 传输的一小块数据。
- **路由器**：在不同网络之间定向数据包的设备。
- **IP 地址**：分配给网络上每个设备的唯一标识符，用于将数据路由到正确的目标。
- **域名**：用于标识网站的可读名称，例如 google.com、chatgpt.com、chat.deepseek.com。
- **DNS 地址**：域名系统负责将域名转换为 IP 地址。
- **HTTP 协议**：超文本传输协议用于在客户端（如 Web 浏览器）和服务器（如网站）之间传输数据。
- **HTTPS 的 URL**：HTTP 的加密版本，用于在客户端和服务器之间提供安全通信。
- **SSL/TLS**：安全套接字层和传输层安全协议用于通过 Internet 提供安全通信。

#### 9、协议的重要性

<u>**协议**是一组规则和标准，用于定义如何在设备和系统之间交换信息。</u>协议在实现 Internet 上的通信和数据交换方面发挥着关键作用。

Internet 通信中使用了许多不同的协议：

- **Internet 协议 (IP)**
- **传输控制协议 (TCP)**
- **用户数据报协议 (UDP)**
- **域名系统 (DNS)**
- 等等。

作用：

- **IP** 负责将数据包路由到正确的目的地。
- 而 **TCP** 和 **UDP** 确保数据包可靠有效地传输。
- **DNS** 用于将域名转换为 IP 地址。
- **HTTP** 用于在客户端和服务器之间传输数据。

标准化协议的**主要好处**： 它们允许来自不同制造商和供应商的设备和系统相互**无缝通信**。

### 2、IP 和域名

- **IP 地址**是分配给网络上每个设备的唯一标识符。
- **域名**是用于识别网站和其他互联网资源的人类可读名称。

域名使用**域名系统 (DNS)** 转换为 IP 地址。

#### DNS 工作原理

当在 Web 浏览器中输入域名时，计算机会向 **DNS 服务器**发送 DNS 查询，该服务器会返回相应的 IP 地址。然后，计算机使用该 IP 地址连接到所请求的网站或其他资源。

即：

​	域名输入(Web浏览器)

​	—>DNS发送DNS查询

​	—>(查询成功)返回对应IP地址

​	—>使用该IP地址

​	—>访问网站/资源

## 三、TCP/IP 初识

### 1、TCP 的特点

TCP (传输控制协议) 是一种**面向连接的**、**可靠的**、**基于字节流的**<u>传输层协议</u>。

- **面向连接**：在数据传输之前，必须先建立连接。
- **可靠传输**：通过序列号、确认应答、重传机制、流量控制和拥塞控制等确保数据完整、有序地到达。
- **字节流**：应用程序的数据被视为一连串的字节，TCP 负责将其分割成报文段进行传输。
- **全双工**：数据可以在两个方向上同时传输。

### 2、TCP 报文结构

TCP 报文段由 **TCP 首部**和**数据部分**组成。 TCP 首部包含源端口、目的端口、序列号、确认号、数据偏移、保留、标志位（如 SYN, ACK, FIN, RST）、窗口大小、校验和、紧急指针、选项等字段。这些字段用于实现 TCP 的可靠性、流量控制和连接管理。

### 3、TCP 建立连接和释放连接的过程 

#### 1、建立连接：三次握手

- **第一次握手**：客户端发送 `SYN` (同步序列号) 报文段到服务器，并进入 `SYN-SENT` 状态，等待服务器确认。
- **第二次握手**：服务器收到 `SYN` 报文段后，发送 `SYN+ACK` (同步序列号+确认应答) 报文段给客户端，并进入 `SYN-RECEIVED` 状态。
- **第三次握手**：客户端收到 `SYN+ACK` 报文段后，发送 `ACK` 报文段给服务器，并进入 `ESTABLISHED` (已建立连接) 状态。服务器收到 `ACK` 后也进入 `ESTABLISHED` 状态。

#### 2、释放连接：四次挥手

- **第一次挥手**：客户端发送 `FIN` (结束) 报文段到服务器，表示它已没有数据要发送，进入 `FIN-WAIT-1` 状态。
- **第二次挥手**：服务器收到 `FIN` 后，发送 `ACK` 报文段给客户端，表示已收到关闭请求，进入 `CLOSE-WAIT` 状态。此时服务器可能还有数据要发送。
- **第三次挥手**：服务器发送完所有数据后，发送 `FIN` 报文段给客户端，表示它也准备关闭连接，进入 `LAST-ACK` 状态。
- **第四次挥手**：客户端收到服务器的 `FIN` 后，发送 `ACK` 报文段给服务器，进入 `TIME-WAIT` 状态（等待一段时间以确保服务器收到 ACK）。服务器收到 `ACK` 后进入 `CLOSED` 状态。客户端在 `TIME-WAIT` 结束后也进入 `CLOSED` 状态。

### 4、 使用 TCP/IP 构建应用程序

TCP/IP 是大多数基于 Internet 的应用程序和服务使用的底层通信协议。

有关 TCP/IP 构建应用程序的几个关键概念：

- **端口**： 端口用于标识设备上运行的应用程序或服务。 每个应用程序或服务都分配有一个唯一的端口号。 允许将数据发送到正确的目的地。
- **套接字**：套接字是 IP 地址和端口号的组合，代表用于通信的特定端点。 套接字用于在设备之间建立连接并在应用程序之间传输数据。
- **连接**：当两个设备想要相互通信时，两个套接字之间建立连接。在连接建立过程中，设备会协商各种参数，例如最大段大小和窗口大小，这些参数决定了数据如何通过连接传输。
- **数据传输**：建立连接后，可以在每台设备上运行的应用程序之间传输数据。 数据通常以分段形式传输，每个分段都包含序列号和其他元数据，以确保可靠交付。

## 四、HTTP 初识

### 1、HTTP 报文结构

HTTP 报文分为<u>**请求报文**和**响应报文**</u>。

- **HTTP 请求报文**：
  - **请求行**：`方法 URL HTTP版本` (例如: `GET /index.html HTTP/1.1`)
  - **请求头**：键值对形式，提供额外信息 (例如: `Host: www.example.com`, `User-Agent: ...`)
  - **空行**：分隔请求头和请求体。
  - **请求体**：可选，发送给服务器的数据 (例如: POST 请求中的表单数据)。
- **HTTP 响应报文**：
  - **状态行**：`HTTP版本 状态码 状态码描述` (例如: `HTTP/1.1 200 OK`)
  - **响应头**：键值对形式，提供额外信息 (例如: `Content-Type: text/html`, `Content-Length: 123`)
  - **空行**：分隔响应头和响应体。
  - **响应体**：服务器返回给客户端的数据 (例如: HTML 页面内容)。

### 2、状态码含义 (常见)

<u>HTTP 状态码是三位数字，表示服务器对请求的响应状态。</u>

| 状态码分类 | 描述                                 | 常见状态码                                                   |
| ---------- | ------------------------------------ | ------------------------------------------------------------ |
| **1xx**    | 表示接收到请求，继续处理。           |                                                              |
| **2xx**    | 表示请求已成功被接收、理解、并接受。 | `200 OK`：请求成功。                                         |
| **3xx**    | 表示需要采取进一步行动才能完成请求。 | `301 Moved Permanently`：永久重定向。<br>`302 Found`：临时重定向。<br>`304 Not Modified`：资源未修改，可使用缓存。 |
| **4xx**    | 表示客户端似乎有问题。               | `400 Bad Request`：请求语法错误。<br>`401 Unauthorized`：未授权。<br>`403 Forbidden`：服务器拒绝请求。<br>`404 Not Found`：请求的资源不存在。 |
| **5xx**    | 表示服务器在处理请求时发生错误。     | `500 Internal Server Error`：服务器内部错误。<br>`502 Bad Gateway`：网关或代理服务器从上游服务器收到无效响应。<br>`504 Gateway Timeout`：网关或代理服务器未能及时从上游服务器获得响应。 |

### 3、一个完整的 HTTP 请求/响应过程 

- **DNS 解析**：浏览器解析域名，通过 DNS 服务器获取服务器的 IP 地址。
- **建立 TCP 连接**：浏览器与服务器通过三次握手建立 TCP 连接。
- **发送 HTTP 请求**：浏览器向服务器发送 HTTP 请求报文。
- **服务器处理请求**：服务器接收并处理请求，生成 HTTP 响应。
- **发送 HTTP 响应**：服务器将 HTTP 响应报文发送回浏览器。
- **浏览器解析响应**：浏览器接收响应，解析报文体（如 HTML、CSS、JS），并渲染页面。
- **关闭 TCP 连接**：浏览器与服务器通过四次挥手关闭 TCP 连接（或保持连接以便后续请求）。

### 4、HTTP 和 HTTPS

- **HTTP** 是用于在客户端（如 Web 浏览器）和服务器（如网站）之间传输数据的协议。
- **HTTPS** 是 HTTP 的更安全版本，它使用 **SSL/TLS**（安全套接字层/传输层安全性）加密来加密在客户端和服务器之间传输的数据。

## 五、浏览器基础知识

### 1、DOM 事件流 / 事件委托

#### 1、DOM 事件流

当一个事件（如点击）发生在 DOM 元素上时，它会经历三个阶段：

- **捕获阶段**：事件从 `Window` 对象开始，向下传播到目标元素。
- **目标阶段**：事件到达实际触发它的目标元素。
- **冒泡阶段**：事件从目标元素开始，向上冒泡到 `Window` 对象。

#### 2、事件委托

事件委托是一种利用事件冒泡机制的**优化技术**。它不是给每个子元素都绑定事件监听器，而是将事件监听器绑定到它们的共同父元素上。当子元素上的事件冒泡到父元素时，父元素的监听器会捕获到事件，并通过 `event.target` 属性判断是哪个子元素触发了事件，然后执行相应的处理逻辑。

**优点**：

- 减少内存消耗：只需要一个监听器。
- 动态元素：对未来添加的子元素也有效。

### 2、浏览器加载过程

- **DNS 解析**：将域名解析为 IP 地址。
- **建立 TCP 连接**：与服务器建立 TCP 连接。
- **发送 HTTP 请求**：浏览器向服务器发送请求获取 HTML 文档。
- **服务器响应**：服务器返回 HTML 文档。
- **解析 HTML**：浏览器开始解析 HTML 文档，构建 **DOM 树**。
- **加载资源**：在解析过程中，遇到 `<link>` (CSS)、`<script>` (JavaScript)、`<img>` 等外部资源时，会并行下载这些资源。
- **构建 CSSOM 树**：解析 CSS 文件，构建 **CSS 对象模型 (CSSOM) 树**。
- **构建渲染树**：DOM 树和 CSSOM 树结合，生成**渲染树**。渲染树只包含需要显示在页面上的元素及其样式。
- **布局**：计算渲染树中每个元素在屏幕上的确切位置和大小。
- **绘制**：将渲染树中的元素转换为像素，绘制到屏幕上。
- **执行 JavaScript**：在 HTML 解析过程中，如果遇到 `<script>` 标签，会暂停 HTML 解析，下载并执行 JavaScript 代码。JavaScript 可能会修改 DOM 和 CSSOM，从而触发重新布局和绘制。

### 3、浏览器渲染过程

渲染过程主要包括：

- **解析 HTML 生成 DOM 树**。
- **解析 CSS 生成 CSSOM 树**。
- **合并 DOM 树和 CSSOM 树生成渲染树**。
- **布局**：计算渲染树中每个节点的位置和大小。
- **绘制**：将布局好的元素绘制到屏幕上。
- **合成**：将不同层（例如，具有 `transform` 或 `opacity` 的元素可能在单独的层上）绘制到一起，最终显示在屏幕上。

### 4、事件循环

JavaScript 是单线程的，但浏览器通过事件循环机制实现了**非阻塞 I/O**。

**核心概念**：

- **调用栈**：执行同步任务。
- **任务队列**：存放异步任务的回调函数（如 `setTimeout`, `Ajax`）。
- **微任务队列**：存放优先级更高的异步任务（如 `Promise` 的 `then/catch/finally`, `MutationObserver`）。
- **事件循环**：持续检查调用栈是否为空。如果为空，它会首先检查微任务队列，执行所有微任务；然后检查任务队列，将第一个任务的回调函数推到调用栈中执行。这个过程不断重复。

### 5、无头浏览器

**无头浏览器**是一种没有图形用户界面 (GUI) 的浏览器。它可以在后台运行，执行网页的各种操作，如加载页面、执行 JavaScript、捕获 DOM 结构、生成截图等。

**主要用途**：

- **自动化测试**。
- **网页抓取**。
- **自动化任务** (如生成 PDF)。

### 6、WebView

**WebView** 是一个可嵌入的浏览器组件，允许应用程序（通常是移动应用）显示网页内容，而无需启动完整的外部浏览器应用程序。它提供了一个浏览器引擎的子集，可以在原生应用中渲染 HTML、CSS 和 JavaScript。

**常见应用**：

- 在应用内显示帮助文档、用户协议等网页内容。
- 集**成第三方登录页面**。
- **混合应用开发**。
