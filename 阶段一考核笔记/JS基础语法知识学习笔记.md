# JavaScript 基础语法学习笔记

<img src="./assets/js-logo.png" align=left style="zoom: 150%;" />

## 零、学习之前的初步了解

JavaScript 是互联网上最流行的脚本语言，这门语言可用于 HTML 和 web，更可广泛用于服务器、PC、笔记本电脑、平板电脑和智能手机等设备。  

* JavaScript 是脚本语言[^1]

* JavaScript 是一种高级编程语言，主要用于网页开发，可实现网页的交互效果和动态功能。
* JavaScript 是可插入 HTML 页面的编程语言。
* JavaScript 插入 HTML 页面后，可由所有的现代浏览器执行。
* 它可以在浏览器中运行，也可以在服务器端使用 Node.js 运行。
* JavaScript 具有丰富的语法和功能，包括变量声明、函数定义、对象操作、事件处理等。
* 它可以与 HTML 和 CSS 结合使用，为网页提供更加丰富的用户体验。

## 一、变量声明与定义

### JavaScript

- 使用`var`、`let`和`const`来声明变量。

  - `var`：**函数作用域**，<u>可以被重新声明和赋值</u>。
  - `let`：**块级作用域**，可以被重新赋值，<u>但不能重新声明</u>。
  - `const`：**块级作用域**，声明后不能被重新赋值或重新声明。

```javascript
  var message = "Hello, world!";
  let count = 1;
  const pi = 3.14159;
```

* `var`存在变量提升的特性，这意味着变量可以在声明之前使用，不过这种情况可能会导致一些意外的结果。例如：

```javascript
console.log(x); //在控制台输出变量 x 的值
var x = 10;
//使用后才声明？对吗？
```

<u>**上面的代码不会报错**</u>，<u>因为`var`声明的变量`x`会被**提升到作用域[^2]的顶部**<“变量提升”></u>，

==代码相当于：==

==`var x; console.log(x); x = 10;`，==

==此时`x`的值为`undefined（即未定义）`。==

- **`let`和`const`不存在变量提升；**

- 并且`const`声明的变量是常量，一旦赋值后不能重新赋值。
例如：

```javascript
console.log(y); 
let y = 20;
// 会报错，因为 y 还没有声明就使用了（只有 var 可以进行“变量提升”）
const z = 30; //赋初值30
z = 40;
// 会报错，因为不能给 const 声明的常量重新赋值 
```

### C 语言

- 在 C 语言中，变量需要**先声明其类型，然后才能使用**。
  例如：

```c
int main() 
{
  int a;
  a = 10;
  printf("%d", a);
  return 0;
}
```

- C 语言没有像 JavaScript 中`let`和`const`那样的块级作用域概念，**变量的作用域主要是由函数来界定的**。
  * 如果在一个函数内部声明的变量，在函数外部是无法访问的。（`{ }`内部）

> **小的不同点（数据的类型）**
>
> * JavaScript 与 C 语言在定义变量时不同的一点就是，在 C 语言中我们定义变量时要同时声明数据的类型，如：int a = 5;但在 JavaScript 中我们不用特意去指明具体的数据类型。
> * 这是因为 JavaScript 具有动态类型的特性。在 JavaScript 中，变量在声明时不需要指定具体的数据类型，同一个变量可以在不同的阶段存储不同类型的值，
>   * 例如可以先存储一个数字，然后存储一个字符串。
>   * 这种特性使得 JavaScript 在编程时更加灵活，**但也可能在某些情况下导致一些难以察觉的错误**。

## 二、数据类型

### JavaScript

- **JS**是一种**弱类型语言**，数据类型包括
  * **基本**数据类型（如 Number、String、Boolean、Undefined、Null）；
  * **引用**数据类型（如 Object、Array、Function(函数)）
  
- **字符串(String)**：由字符组成的序列，用单引号`'`、双引号`"`或反引号`` ` ``包围。
- **数字(Number)**：整数或浮点数。
- **布尔(Boolean)**：`true`或`false`。
- **未定义(Undefined)**：`undefined`，表示变量已声明但未赋值。
- **空值(Null)**：`null`，表示没有值。
- **对象(Object)**：键值对[^3]的集合。
- **数组(Array)**：有序的值的集合。

```javascript
let name = "jiandu";//字符串类型
let age = 30;//数字型（整型/浮点型）
let isDeveloper = true;//布尔型
let x;//未定义 undefined
let car = null;//空值
let person = { name: "jiandu", age: 30 };//对象的键值对
let numbers = [1, 2, 3, 4];
```

- ==一个变量可以在**不同的时刻**存储不同类型的数据==：

```javascript
let variable;
variable = 10;//整型‘10’
variable = "string";//改变了variable的值为字符串‘string’
```

### C 语言

- **C语言**是一种**强类型语言**，数据类型包括

  基本数据类型（如`int`、`float`、`char`、`double`等）

- 每个变量在定义时就确定了类型，并且不能随意改变类型：

```c
int num1 = 10;
float num2 = 3.14f;
char ch = 'a';
```

## 三、 操作符

### 1、算术操作符

- 加法操作符（+）

  - **C 语言**：主要用于数字相加，当操作数是整数类型时进行整数加法，是浮点数类型时进行浮点数加法。
    例如：
    `int a = 3; int b = 4; int c=a + b;`，`c`的值为 7；
    `float d = 3.0; float e = 4.0; float f=d + e;`，`f`的值为 7.0。

    如果操作数一个是整数一个是浮点数，整数会被转换为浮点数再进行加法运算。

  - **JavaScript**：<u>**除了数字相加外，还用于字符串拼接**</u>。例如：
    `let num1 = 3; let num2 = 4; let sum = num1 + num2;`，`sum`的值为 7；
    `let str1 = "hello"; let str2 = "world"; let str3 = str1 + str2;`，`str3`的值为`"helloworld"`。当一个操作数是数字，另一个是字符串时，数字会被转换为字符串然后进行拼接。

- 减法操作符（-）、乘法操作符（*）、除法操作符（/）和取余操作符（%）

  - **C 语言**：这些操作符在 C 语言中的行为比较单一，主要用于**数字类型（整数、浮点数）的相应算术运算**。例如，
    `int g = 7/2;`，`g`的值为 3（整数除法）；
    `float h = 7.0/2.0;`，`h`的值为 3.5（浮点数除法）。
  - **JavaScript**：和 C 语言类似，用于数字的算术运算。不过在 JavaScript 中，**除法操作符`/`总是返回浮点数结果**，例如
    `let result1 = 7/2;`，`result1`的值为 3.5。
    取余操作符`%`在负数运算时，C 语言和 JavaScript 的结果可能不同：
    * 在 C 语言中，`-7 % 2`的结果是 -1（结果的正负号与**被除数**符号一致）【与数学相关定义不一致】
    * 而在 JavaScript 中，`-7 % 2`的结果是 1（结果的符号与**除数**相同）【与数学相关定义一致】

### 2、赋值操作符

- 简单赋值操作符（=）
  - **C 语言**：用于将一个值赋给变量，**并且变量必须先声明其类型**。例如：
    `int variable1; variable1 = 5;`。
  - **JavaScript**：同样用于赋值，**但变量可以不预先声明类型，它是动态类型语言**。例如：
    `let variable2; variable2 = 5;`或者可以在声明变量时直接赋值（C语言也可），如
    `let variable3 = 5;`。
- 复合赋值操作符（+=、-=、*=、/=、%= 等）
  - **C 语言和 JavaScript**：
    在这两种语言中，**复合赋值操作符的基本功能类似，都是先进行算术运算再赋值**。例如，
    在 C 语言中`int num1 = 3; num1 += 2;`，`num1`的值变为 5；
    在 JavaScript 中`let num2 = 3; num2 += 2;`，`num2`的值也变为 5。

### 3、比较操作符

- 等于操作符（`==`）和全等（严格相等）操作符（`===`）

  - **C 语言**：只有`==`用于比较，**比较时会进行隐式类型转换**。例如，`int a = 5; float b = 5.0;`，`a == b`的结果为真。

  - **JavaScript**：有`==`和`===`。
    `==`会进行隐式类型转换后比较，
    `===`不会进行类型转换，只有当值和类型都完全相等时才返回真(故为“严格”)。
    例如，

    `let num1 = 5; let str1 = "5";`，`num1 == str1`为真，但`num1 === str1`为假。

- 其他比较操作符（>、<、>=、<=、!=）

  - **C 语言和 JavaScript**：这些比较操作符在两种语言中的功能基本相同，都是用于比较两个值的大小关系或是否不相等。不过在 <u>JavaScript 中，**比较操作符在比较非数字类型时会进行一些类型转换**</u>。例如，
    在 JavaScript 中`"10" > "2"`为真，因为字符串比较是按照字符编码顺序进行的；
    而在 C 语言中，这种比较是不合法的（如果是字符数组形式存储的字符串，比较的是内存地址等情况）。

### 4、逻辑操作符

- 逻辑**与**（&&）、逻辑**或**（||）和逻辑**非**（!）

  - **C 语言**：逻辑操作符用于操作布尔值，在 C 语言中，非 0 值被视为真，0 被视为假。例如，
    `int a = 5; int b = 0;`，
    `a && b`为假，`a || b`为真，`!b`为真。

  - **JavaScript**：和 C 语言类似，非 0 值（包括非 0 数字、非空字符串等）被视为真，0、`null`、`undefined`、空字符串等被视为假。例如，
    `let num1 = 5; let str1 = "";`，`num1 && str1`为假，`num1 || str1`为真，`!str1`为真。

    不过在 JavaScript 中，逻辑操作符还有一个短路特性，例如在`&&`操作符中，如果第一个操作数为假，就不会计算第二个操作数；在`||`操作符中，如果第一个操作数为真，就不会计算第二个操作数。（更高效了？🤔）

### 5、自增和自减操作符（++、--）

- **C 语言**：可以作为前缀（如`++i`）和后缀（如`i++`）使用，
  前置自增（减）是先改变变量的值，然后使用变量的值；
  后置自增（减）是先使用变量的值，然后改变变量的值。例如：
  `int i = 3; int a = ++i;`，
  `a`的值为 4，`i`的值为 4；

  `int j = 3; int b = j++;`，
  `b`的值为 3，`j`的值为 4。

- **JavaScript**：和 C 语言的基本原理相同，但在 JavaScript 中，**这些操作符主要用于数字类型**，并且在表达式中的使用可能会导致一些意想不到的结果，因为 JavaScript 的类型转换[^5]和隐式求值机制[^6]。例如：
  `let num1 = "3"; num1++;`，`num1`的值会变为 4，因为 JavaScript 会先将字符串`"3"`转换为数字 3，然后进行自增操作。

## 四、函数

### JavaScript

* **Function**

- **函数可以作为参数传递，也可以作为返回值返回**。
  例如：

```javascript
function add(a, b) {
  return a + b;
}	
function operate(func, x, y) {
  return func(x, y);
}
console.log(operate(add, 3, 5));
```

- **函数内部可以访问外部变量，形成闭包**[^4]。
  例如：

```javascript
function outer() {
  let outerVariable = 10;
  return function inner() {
    return outerVariable;
  };
}
let closure = outer();
console.log(closure());
```

### C 语言

- 函数在 C 语言中是一段独立的代码块，有明确的参数和返回值类型。
  例如：

```c
int add(int a, int b) {
  return a + b;
}
int main() {
  int result = add(3, 5);
  printf("%d", result);
  return 0;
}
```

- **C 语言中的函数不能像 JavaScript 那样作为参数直接传递函数本身**（不过可以通过函数指针来实现类似的功能）。并且 **C 语言函数内部的局部变量在函数执行结束后就会被销毁**，不存在闭包的概念。

> 解释闭包
>
> 闭包就像是一个神奇的“记忆盒子”，它能帮我们记住一些重要的东西，即使外面的世界变了，它也能找到那些东西。这在编程里很有用，比如我们可以用它来保护一些秘密数据，不让别人随便看到。
>
> 闭包（**Closure**）就是一个小盒子，它能记住它出生时的环境。就像一个小宝宝记得它出生时的家一样，闭包记得它出生时的变量。即使它离开了那个环境，它还能找到那些变量。
>
> ### 1、**外层函数定义变量**  
>
> 想象一下，有一个大盒子（`outer` 函数），里面有一个小盒子（`inner` 函数）。大盒子里有一个秘密礼物（`outerVariable`）。  
>
> ```javascript
> function outer() {
>   let outerVariable = 10; // 大盒子里的秘密礼物
>   return function inner() {
>     return outerVariable; // 小盒子可以拿到这个礼物
>   };
> }
> ```
> 这里，`outerVariable` 是大盒子里的秘密礼物。
>
> ### 2、**返回小盒子**  
>
> 当我们打开大盒子（调用 `outer()`），它把小盒子（`inner` 函数）给了我们。  
>
> ```javascript
> let closure = outer(); // closure 是小盒子
> ```
> 这个小盒子（`closure`）记住了大盒子里的秘密礼物。
>
> ### 3、**小盒子的记忆**  
>
> 即使大盒子已经不在了，小盒子（`closure`）还能找到那个秘密礼物。  
>
> ```javascript
> console.log(closure()); // 输出 10
> ```
> 这里，`closure()` 就是小盒子，它找到了大盒子里的秘密礼物（`outerVariable`）。
>
> 闭包就像一个超级助手，它能帮我们：
> - **保护秘密**：把秘密礼物藏起来，别人找不到。
> - **记住东西**：即使外面的世界变了，它还能找到需要的东西。
> - **让代码更干净**：不用到处乱放东西，把它们都藏在盒子里。
>

## 五、控制流结构

### JavaScript

- **条件语句**：`if`、`else if`、`else`、`switch`。
- **循环**：`for`、`while`、`do...while`、**`for...in`、`for...of`**。

```javascript
if (age >= 18) {
    console.log("Adult");
} else {
    console.log("Minor");
}

for (let i = 0; i < 5; i++) {
    console.log(i);
}
```

==**其中**==

***`for...in` 循环***

> *`for...in`循环用于遍历一个对象的所有可枚举属性，包括继承的属性。它通常用于遍历对象的属性名。*
>
> ```javascript
>let obj = {
> a: 1,
> b: 2,
> c: 3
> };
> 
> for (let key in obj) {
> if (obj.hasOwnProperty(key)) { // 检查属性是否为对象自身的属性，而不是继承的
> console.log(key + " = " + obj[key]);
> }
>   }
> // 输出：
> // a = 1
> // b = 2
> // c = 3
> ```
> 
 *在上面的例子中，`for...in`循环遍历对象`obj`的所有可枚举属性。`hasOwnProperty`方法用于检查属性是否为对象自身的属性，以避免打印出从原型链继承的属性。*

 ***`for...of` 循环***
>*`for...of`循环用于遍历可迭代对象（如数组、字符串、Map、Set等）的值。它不包括对象的键，也不包括继承的属性。*
> 
>```javascript
> let arr = [3, 5, 7];
>
> for (let value of arr) {
> console.log(value);
> }
> // 输出：
> // 3
> // 5
> // 7
> ```
> 
> *在上面的例子中，`for...of`循环遍历数组`arr`中的每个元素。*
> 
>***区别和使用场景***
> 
>- ***`for...in`**：当你需要遍历一个对象的所有可枚举属性（包括继承的属性）时使用。通常用于对象。*
> - ***`for...of`**：当你需要遍历一个可迭代对象的值时使用。通常用于数组、字符串、Map和Set。*
>
> ***额外注意事项***
> 
>- ***`for...in`**循环不应该用于数组，因为它会遍历数组的索引和数组对象继承的属性。*
> - ***`for...of`**循环提供了一种更简洁和现代的方式来遍历可迭代对象的值。*

### C 语言

- 同样有`if - else`、`switch`用于条件判断，`for`、`while`、`do - while`用于循环。例如：

```c
int num = 5;
if (num > 3) {
  printf("大于3");
} else {
  printf("小于等于3");
}
for (int i = 0; i < 5; i++) {
  printf("%d", i);
}
```

- C 语言没有像`for - of`这样直接用于遍历数组等容器的循环结构，不过可以通过指针等方式来实现类似的功能。

## 六、内存管理（差异较大）

### JavaScript

- 有自动的垃圾回收机制[^7]（GC）。当一个对象不再被引用时，垃圾回收器会自动回收它所占用的内存。开发者一般不需要手动释放内存。

### C 语言

- 需要开发者手动进行内存管理。使用`malloc`等函数来分配内存，使用`free`函数来释放内存。如果忘记释放内存，会导致内存泄漏；如果释放内存的时机不当或者多次释放同一块内存，会导致程序崩溃等问题。例如：

```c
int main() {
  int* ptr = (int*)malloc(sizeof(int));
  *ptr = 10;
  // 记得释放内存
  free(ptr);
  return 0;
}
```



## 七、JS代码规范

### **一、代码布局**

* 缩进
  * 使用 4 个空格进行缩进，不要使用制表符（tab）。这有助于保持代码在不同编辑器中的一致性。例如：

```javascript
if (condition) {
    console.log('True');
}
```

* 换行
  * 每行代码尽量不要超过 80 - 100 个字符。如果表达式过长，应该在合适的运算符后换行，并且缩进下一行代码。例如：

```javascript
const longExpression = someLongVariableName1 + someLongVariableName2 +
    someLongVariableName3;
```

* 空格的使用
* 在运算符（如 +、-、*、/、=、`==`、`===`、<、> 等）的前后各添加一个空格，以增强表达式的可读性。例如：

```javascript
const result = a + b;
```

* 在函数调用时，函数名和左括号之间没有空格，参数之间用逗号和空格隔开。例如：

```javascript
console.log('Hello', 'World');
```

- 在控制语句（if、for、while 等）的括号前后添加空格。例如：

```javascript
if (condition) {
    // 代码块
}
```

### **二、变量和常量**

* 变量命名
  * 采用小驼峰命名法（camelCase）。变量名的第一个单词首字母小写，后续单词首字母大写。例如：

```javascript
let userAge;
let productName;
```

* 变量名应该具有描述性，能够清晰地表达变量的用途。避免使用单个字母（如`a`、`b`）作为变量名，除非是在简单的循环计数器等情况下。

* 常量命名
  * 使用大写字母和下划线（SNAKE_CASE）来命名常量。例如：

```javascript
const MAX_COUNT = 100;
const PI_VALUE = 3.14159;
```

* 变量声明
  * 尽量在函数顶部声明变量，避免在代码块中间随意声明变量，这样有助于提高代码的可读性和可维护性。
  * 使用`let`和`const`来声明变量，避免使用`var`。`let`用于可变变量，`const`用于不可变的常量。例如：

```javascript
function myFunction() {
    let variable1;
    const variable2 = 5;
    // 代码逻辑
}
```

### **三、函数**

* 函数命名
  * 采用动词或动词短语的小驼峰命名法，能够清晰地表达函数的功能。例如：

```javascript
function calculateSum() {
    // 计算总和的逻辑
}
function updateUserInfo() {
    // 更新用户信息的逻辑
}
```

* 函数参数
  * 函数参数也应该采用有意义的命名方式，遵循变量命名规则。例如：

```javascript
function printMessage(message, count) {
    for (let i = 0; i < count; i++) {
        console.log(message);
    }
}
```

* 函数声明和表达式
  * 优先使用函数声明而不是函数表达式。函数声明会在代码执行前被解析，因此可以在函数声明之前调用函数。例如：

```javascript
function addNumbers(a, b) {
    return a + b;
}
```

- 如果使用函数表达式，应该将其赋值给一个变量，并且变量名要有意义。例如：

```javascript
const multiplyNumbers = function (a, b) {
    return a * b;
};
```

### **四、注释**

* 单行注释
  * 使用`//`进行单行注释，注释应该放在被注释代码的上方或右侧。例如：

```javascript
// 这是一个计算平方的函数
function square(num) {
    return num * num;
}
```

或者

```javascript
function square(num) {
    return num * num; // 计算num的平方并返回
}
```

* 多行注释
  * 使用`/* */`进行多行注释，用于对一段复杂的代码逻辑或功能进行详细解释。例如：

```javascript
/*
这个函数用于验证用户输入的密码是否符合要求。
要求包括长度至少为8位，包含数字和字母。
*/
function validatePassword(password) {
    // 验证逻辑
}
```

### **五、代码块和语句**

* 花括号的使用
  * 在控制语句（if、for、while、function 等）中，即使代码块只有一行，也应该使用花括号包裹。例如：

```javascript
if (condition) {
    console.log('True');
} else {
    console.log('False');
}
```

* 分号的使用
  * 始终在语句末尾添加分号。虽然 JavaScript 在某些情况下可以自动插入分号（ASI - Automatic Semicolon Insertion），但依赖 ASI 可能会导致意外的行为。例如：

```javascript
let a = 5;
let b = 10;
```

### **六、对象和数组**

* 对象字面量
  * 对象字面量的属性名和值之间使用冒号（:）隔开，属性之间用逗号（,）隔开。属性名如果是合法的标识符，可以省略引号。例如：

```javascript
const user = {
    name: 'John',
    age: 30,
    address: {
        street: '123 Main St',
        city: 'Anytown'
    }
};
```

* 数组字面量
  * 数组字面量的元素之间用逗号（,）隔开。例如：

```javascript
const numbers = [1, 2, 3, 4, 5];
```























## *注释

[^1]: 脚本语言是一种为了**缩短**<u>传统的编写 - 编译 - 链接 - 运行过程</u>而创建的计算机编程语言。脚本语言通常都有简单、易学、易用的特性，**目的是快速开发脚本以控制软件应用程序**。
[^2]: 作用域指的是变量、函数等在程序中起作用的**范围**。在特定的作用域内，变量可以被访问和修改，而在作用域之外，可能无法直接访问这些变量。<br>例如，在一个函数内部定义的变量通常具有局部作用域，只能在该函数内部使用；而在全局范围内定义的变量则具有全局作用域，可以在整个程序的任何地方被访问（除非被局部变量遮蔽）。
[^3]: 键值对是一种数据结构，由一个键和一个与之对应的值组成。例如，在字典中，“apple”可以是一个键，“一种水果”可以是与之对应的值。键值对常用于存储和检索数据，通过键可以快速找到对应的值。
[^4]: 在函数内部可以访问外部变量，并且该函数可以将这个外部变量 “包裹” 起来，形成一个独立的环境，使得外部变量在函数执行结束后依然可以被访问和使用。例如，在 JavaScript 中，可以定义一个函数，这个函数内部又定义了一个内部函数，内部函数可以访问外部函数的变量，并且外部函数将内部函数作为返回值，这样就形成了一个闭包。
[^5]: “类型转换” 指的是将一种数据类型转换为另一种数据类型的过程。例如，将整数转换为浮点数，或将字符串转换为数字等。
[^6]: “隐式求值机制” 是一种在程序运行过程中自动进行计算或转换的机制，而不需要显式地指定。比如在某些编程语言中，当不同类型的数据进行运算时，可能会自动进行类型转换，这就是隐式求值机制的一种表现。
[^7]: 垃圾回收机制是一种用于管理计算机内存的技术。在编程语言中，程序在运行过程中会创建各种对象和数据结构，这些对象和数据结构会占用内存空间。当这些对象不再被使用时，垃圾回收机制会自动识别并回收它们所占用的内存空间，以避免内存泄漏和提高内存的使用效率。<br>例如，在 Java 语言中，垃圾回收器会定期扫描内存，查找不再被引用的对象，并将其占用的内存空间释放掉。这样可以确保程序在运行过程中不会因为内存不足而出现问题。 垃圾回收机制的工作方式通常包括标记、清除和整理等步骤。<br>首先，它会标记出所有正在被使用的对象。然后，清除那些没有被标记的对象，即不再被使用的对象。最后，可能会对内存进行整理，以提高内存的使用效率。 不同的编程语言可能有不同的垃圾回收机制实现方式，但它们的目的都是为了有效地管理内存，提高程序的性能和稳定性。